<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vokabeltrainer</title>
  <link rel="manifest" href="manifest.webmanifest">
  <style>
    body { background: #ffe6f0; font-family: sans-serif; margin:0; padding:0; text-align:center; }
    header { padding: 1rem; background:#ffccd5; }
    button { margin:0.5rem; padding:1rem 2rem; font-size:1.2rem; touch-action: manipulation; }
    .opt { display:block; margin:0.5rem auto; padding:1rem; max-width:80%; background:#fff; border:1px solid #ccc; touch-action: manipulation; }
  </style>
</head>
<body>
  <header>
    <h1>Vokabeltrainer</h1>
    <div id="diagnose">Diagnose: Initialisierung...</div>
    <button id="installBtn" style="display:none;">App installieren</button>
  </header>
  <main>
    <button id="startBtn">Starten</button>
    <button id="backBtn">◀ Zurück</button>
    <button id="primaryBtn">Aufdecken</button>
    <button id="nextBtn">Weiter ▶</button>
    <button id="editBtn">✏ Liste anzeigen/bearbeiten</button>
    <button id="hardReset">⟲ Daten zurücksetzen</button>
  </main>
  <script>
    // Basic handlers for demo
    const diag = document.getElementById("diagnose");
    function setDiag(msg){ diag.textContent="Diagnose: "+msg; }
    const App = {
      start(){ setDiag("Training sichtbar"); },
      prev(){ setDiag("Zurück"); },
      primary(){ setDiag("Antwort aufgedeckt"); },
      next(){ setDiag("Weiter"); },
      openEdit(){ setDiag("Liste bearbeiten"); },
      hardReset(){ setDiag("Zurückgesetzt"); }
    };

    document.getElementById("startBtn").onclick = App.start;
    document.getElementById("backBtn").onclick = App.prev;
    document.getElementById("primaryBtn").onclick = App.primary;
    document.getElementById("nextBtn").onclick = App.next;
    document.getElementById("editBtn").onclick = App.openEdit;
    document.getElementById("hardReset").onclick = App.hardReset;

    // Touch fix
    document.querySelectorAll('button').forEach(b => {
      b.setAttribute('ontouchstart', 'this.click(); return false;');
    });

    // Install button logic
    let deferredPrompt;
    const installBtn = document.getElementById('installBtn');
    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
      installBtn.style.display = 'inline-block';
    });
    installBtn.addEventListener('click', async () => {
      if (deferredPrompt) {
        deferredPrompt.prompt();
        const choice = await deferredPrompt.userChoice;
        console.log('User choice:', choice);
        deferredPrompt = null;
        installBtn.style.display = 'none';
      }
    });

    setDiag("Initialisierung abgeschlossen.");
  </script>
</body>
</html>
